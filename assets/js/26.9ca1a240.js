(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{621:function(t,e,a){"use strict";a.r(e);var s=a(2),v=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"有关我帮朋友改搭建libra-blog而遇到的bug"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#有关我帮朋友改搭建libra-blog而遇到的bug"}},[t._v("#")]),t._v(" 有关我帮朋友改搭建libra-blog而遇到的bug")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"title"}),a("p",[t._v("本文是我帮助朋友搭建libra-blog所遇到的一些bug，我与设计的博客主人并不认识。（搭建不是设计）")])]),a("h2",{attrs:{id:"正文开始"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#正文开始"}},[t._v("#")]),t._v(" 正文开始")]),t._v(" "),a("h3",{attrs:{id:"首先肯定是安装libra-blog"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#首先肯定是安装libra-blog"}},[t._v("#")]),t._v(" 首先肯定是安装libra-blog")]),t._v(" "),a("p",[t._v("解压文件并打开，首先打开终端或者git执行"),a("code",[t._v("vuepress dev")]),t._v("发现缺少环境。终端(git以下都是终端代指git，其实都一样)提示运行："),a("code",[t._v("npm i -g @vuepress/core")]),t._v(". 跑完以上安装流程后，我再次运行"),a("code",[t._v("vuepress dev")]),t._v("弹出网页并显示的是文件夹中的"),a("code",[t._v("README.md")]),t._v("中的文件，说明环境配置成功。")]),t._v(" "),a("p",[t._v("接着，按照网页或者"),a("code",[t._v("README.md")]),t._v("的内容执行安装"),a("code",[t._v("libra-blog")]),t._v("。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[t._v("默认已安装yarn并换源，<不懂的请百度>")])]),a("p",[t._v("接着执行"),a("code",[t._v("yarn install")]),t._v("安装博客文件到本文件夹")]),t._v(" "),a("p",[t._v("根据网页或者"),a("code",[t._v("README.md")]),t._v("提示，"),a("code",[t._v("yarn serve")]),t._v("是动态调整。"),a("code",[t._v("yarn build")]),t._v(" 是打包成静态文件方便push到"),a("code",[t._v("Github")]),t._v("，至于最后一个应该是还原文件用的。")]),t._v(" "),a("p",[t._v("我们执行"),a("code",[t._v("yarn serve")]),t._v(" 测试是否配置完成。")]),t._v(" "),a("p",[t._v("至此，就安装完了。")]),t._v(" "),a("h3",{attrs:{id:"然后就开始踩坑了"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#然后就开始踩坑了"}},[t._v("#")]),t._v(" 然后就开始踩坑了")]),t._v(" "),a("p",[t._v("大概是第二天晚上，我的朋友找到我，告诉我上传上去GitHub之后网页一片空白。啥内容都没有。")]),t._v(" "),a("h4",{attrs:{id:"push到github遇到的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#push到github遇到的问题"}},[t._v("#")]),t._v(" push到GitHub遇到的问题")]),t._v(" "),a("p",[t._v("然后我动手测试，首先"),a("code",[t._v("F12")]),t._v("调到控制台发现一堆报错。其中有")]),t._v(" "),a("p",[a("code",[t._v("Mixed Content: The page at 'xxx' was loaded over HTTPS, but requested an insecure resource 'xxx'. This request has been blocked; the content must be served over HTTPS.")]),t._v("这类错误。我们把它称为HTTPS错误。")]),t._v(" "),a("p",[t._v("还有个")]),t._v(" "),a("p",[a("code",[t._v("We‘re sorry but XX doesn‘t work properly without JavaScript enabled. Please enable it to continue")]),t._v("这个是在build后的dist文件夹中的"),a("code",[t._v("index.html")]),t._v("发现的。")]),t._v(" "),a("p",[t._v("还有一串的"),a("code",[t._v("404")]),t._v(".具体描述我这没有。"),a("code",[t._v("我已经修复了这个bug，这些都是后话。")])]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("也就是有3个问题。")]),t._v(" "),a("h5",{attrs:{id:"我们首先来排除第一个-也就是https错误"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#我们首先来排除第一个-也就是https错误"}},[t._v("#")]),t._v(" 我们首先来排除第一个，也就是HTTPS错误")]),t._v(" "),a("p",[t._v("我百度了一下，发现：这类问题一般都是因为我们的网站是HTTPS的，而对方的链接是HTTP协议的，因此在Ajax或者javascript请求时，就会报错。")]),t._v(" "),a("p",[a("strong",[t._v("解决方案")]),t._v("：")]),t._v(" "),a("p",[t._v("在"),a("code",[t._v("build")]),t._v("后的"),a("code",[t._v("index.html")]),t._v("的"),a("code",[t._v("<head>")]),t._v("中添加以下内容：")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("http-equiv")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Content-Security-Policy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("upgrade-insecure-requests"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("它会自动将HTTP请求升级成安全的HTTPS请求。")]),t._v(" "),a("p",[t._v("至此，第一个问题解决。我从Github的仓库更新了"),a("code",[t._v("index.html")]),t._v("，但还是网页一片空白。说明不是这个引起的。")]),t._v(" "),a("h5",{attrs:{id:"然后我们解决404问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#然后我们解决404问题"}},[t._v("#")]),t._v(" 然后我们解决404问题")]),t._v(" "),a("p",[t._v("由于我太久没有改网页bug，于是我采用了对照法测试是否是404导致网页一片白色。")]),t._v(" "),a("p",[t._v("由于网页已经渲染，而我们刚才已经build过了，因为build生成了静态文件，理论上这个文件夹(生成的"),a("code",[t._v("dist")]),t._v(")是可以"),a("strong",[t._v("直接通过yarn serve的")]),t._v("。")]),t._v(" "),a("p",[t._v("我执行一遍"),a("code",[t._v("yarn serve")]),t._v("发现渲染没有错误！。")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"title"}),a("p",[t._v("注意这里是在"),a("code",[t._v("dist")]),t._v("文件夹打开终端执行的命令。")])]),a("p",[t._v("404是找不到这类意思，我在Github仓库创建"),a("code",[t._v("404.md")]),t._v("，白色没有消除。排除缺少404页面。")]),t._v(" "),a("p",[t._v("那么很容易猜测到组件都404了，也就是没找到。而本地是可以跑的。说明是文件路径出了问题。")]),t._v(" "),a("p",[t._v("百度一下。发现确实是"),a("strong",[t._v("相对路径或者绝对路径")]),t._v("能够引起404问题。")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/qq_33744228/article/details/80621580",target:"_blank",rel:"noopener noreferrer"}},[t._v("( 【vue】npm run build打包路径问题_Y.Cheng的博客-CSDN博客_npm 打包到指定目录"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("这篇文章也证明了我猜的没错。")]),t._v(" "),a("p",[t._v("然后我将"),a("code",[t._v("dist")]),t._v("中的"),a("code",[t._v("index.html")]),t._v("中有关引用组件地址前都加上了.。然后双击打开。成功显示背景和动态效果。但是没有主页等按钮。但是，总不能每次渲染完都主动打开手动修改把，万一后面加的东西多了，那就非常麻烦了。")]),t._v(" "),a("p",[t._v("从渲染出发。我们只需要让build的时候加上这个.就可以了。")]),t._v(" "),a("p",[t._v("还是那句：百度一下。")]),t._v(" "),a("p",[t._v("发现大多数说的都是改"),a("code",[t._v("build")]),t._v(" 目录下的，"),a("code",[t._v("webpack.base.config.jswebpack.dev.config.js 、webpack.prod.config.js")]),t._v(" 等配置文件.但是根本找不到。")]),t._v(" "),a("p",[t._v("突然，我想起根目录下的"),a("code",[t._v("package.json")]),t._v("存储了"),a("code",[t._v("yarn build")]),t._v("运行时的指令，发现该指令其实时运行"),a("code",[t._v("vue-cli-service build")]),t._v("这条指令。那么问题就转变为"),a("code",[t._v("vue-cli")]),t._v("的build修改。")]),t._v(" "),a("p",[t._v("我百度了好几种方法，最后我找到了这一种。")]),t._v(" "),a("p",[t._v("改变根目录下的"),a("code",[t._v("vue.config.js")]),t._v(".")]),t._v(" "),a("p",[t._v("刚开始我改变的是.set中的问题，发现根本不管用。")]),t._v(" "),a("p",[t._v("然后我找到了这一种。在"),a("code",[t._v("module.exports")]),t._v("添加。")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  publicPath"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//默认是绝对路径，改成项目所需要的路径，在项目在同一域名多项目的需求下")]),t._v("\n  outputDir"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//修改项目打包文件名称")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("参考：")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/who_become_gods/article/details/114067136",target:"_blank",rel:"noopener noreferrer"}},[t._v(" vue 如何配置@绝对路径_who_become_gods的博客-CSDN博客_vue绝对路径"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/fa9b85f2ffb8",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-cli build路径问题 - 简书 (jianshu.com)"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/a84aac4bf0d0",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue中引用文件配置绝对路径，不在担心文件层级关系 - 简书 (jianshu.com)"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/63e7bb72f47b",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue/cli3.0打包后html文件引入的是绝对路径修改成相对路径问题 - 简书 (jianshu.com)"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("重新"),a("code",[t._v("yarn build")]),t._v("后果然就能显示了，不过只有动态背景和背景。")]),t._v(" "),a("h5",{attrs:{id:"接下来处理最后一个问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#接下来处理最后一个问题"}},[t._v("#")]),t._v(" 接下来处理最后一个问题")]),t._v(" "),a("p",[t._v("就是:"),a("code",[t._v("We‘re sorry but XX doesn‘t work properly without JavaScript enabled. Please enable it to continue")]),t._v("这个是在build后的dist文件夹中的"),a("code",[t._v("index.html")]),t._v("发现的。")]),t._v(" "),a("p",[t._v("根据这个文章：")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/heshuncheng/article/details/107927727",target:"_blank",rel:"noopener noreferrer"}},[t._v("We‘re sorry but XX doesn‘t work properly without JavaScript enabled. Please enable it to continue_hsc的博客-CSDN博客"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("我们打开"),a("code",[t._v("src")]),t._v("目录下"),a("code",[t._v("router")]),t._v("的"),a("code",[t._v("index.js")]),t._v(",修改了"),a("code",[t._v("mode: 'history'")]),t._v(" 为 "),a("code",[t._v("mode: 'hash'")]),t._v(".")]),t._v(" "),a("p",[t._v("重写"),a("code",[t._v("yarn build")]),t._v("push 到 Github.问题解决。")]),t._v(" "),a("h3",{attrs:{id:"至此-目前遇到的所有bug解决了。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#至此-目前遇到的所有bug解决了。"}},[t._v("#")]),t._v(" 至此，目前遇到的所有bug解决了。")])])}),[],!1,null,null,null);e.default=v.exports}}]);